# Бот-анализатор отзывов

> Для хакатона Wildhack, ноябрь 2021


## Локальный запуск

1. Переменные окружения должны лежать в `src/app/.env`, можно взять за основу `src/app/.env.default`
2. `docker compose up`

## CI/CD

1. Деплой средствами Github Actions на Heroku, конфигурация в папке `.github`
2. Выставить Телеграм на отправку вебхуков текущему инстансу нужно командой `python3 manage.py reset_webhook`. Можно это сделать в консоли Хероку `heroku run web bash`
3. Выставить выбхуки телеграм на прием локально тоже можно, предварительно на хост-машине запустив NGROK `hngrok http 80` и указав получившуюся ссылку в переменной окружения `TELEGRAM_WEBHOOKS_DOMAIN` (см. `src/app/.env.default` для примера). Не забыть перезапустить докер при изменении `.env` файла.

## Структура репозитория

1. Django апликейшн один, называется `app`
2. Настройки разбиты с помощью `django-split-settings`, ссылки на конфигурации в `src/app/settings.py`, сами конфигурации в `src/app/conf/*`. Можно не стеснятсья добавлять файлы.
3. Механика работы бота описана в `src/app/bot.py`
4. Таблица для джанго пользователей – `app_user`, для те – `app_telegram_user`. Между собой они не связаны.

## Управление

Стандартная Django admin по адресу `http://localhost/admin`